const fs = require('fs')
const Bluebird = require('bluebird')

function createStorage(name) {
	return new Bluebird(async (resolve, reject) => {
		try {
			const stat = await fs.promises.stat(name)
			if (!stat.isDirectory()) throw new Error('Not a dir!')
		} catch {
			await fs.promises.mkdir(name).catch(reject)
		}

		resolve(name)
	})
}

module.exports = createStorage