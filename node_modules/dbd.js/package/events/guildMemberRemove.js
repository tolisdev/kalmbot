const leaveCommands = require("../handlers/leaveCommands.js")

module.exports = async (client, member, db) => {
	if (client.options.fetchInvites) {
		const data = await client.db.findOne({
			guild: member.guild.id,
			id: member.id
		})

		if (data && data.inviter.id.length) {
			const inviter = await client.db.findOne({
				guild: member.guild.id,
				id: data.inviter.id
			})

			inviter.real--
			inviter.fake++

			await client.db.set(inviter, {
				guild: member.guild.id,
				id: data.inviter.id
			})
		}
	}

  leaveCommands(client, member, db) 
}
