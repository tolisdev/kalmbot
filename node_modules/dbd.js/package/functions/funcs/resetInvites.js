module.exports = async d => {
	let code = d.command.code

	const r = code.split("$resetInvites").length - 1
	const inside = code.split("$resetInvites")[r].after()
	const [ guild = d.message.guild.id, userID ] = inside.splits
	
	if (!d.client.guilds.cache.has(guild)) return d.error(`:x: Invalid guildID in \`$resetInvites${inside.total}\``)
	
	const filter = { guild }

	if (userID) {
		const user = await d.client.users.fetch(userID).catch(err => { })
		
		if (!user) return d.error(`:x: Invalid userID in \`$resetInvites${inside.total}\``)
		
		filter.id = user.id
	}

	return {
		code: code.replaceLast(`$resetInvites${inside.total}`, await d.client.db.delete(filter))
	}
}