module.exports = async d => {
    const code = d.command.code

    const r = code.split("$hasRole[").length - 1

    const inside = code.split("$hasRole[")[r].split("]")[0]

    const userID = inside.split(";")[0]

    const roleID = inside.split(";")[1]
    
    const guildID = inside.split(";")[2] || d.message.guild.id 
    
    const guild = d.client.guilds.cache.get(guildID) 
    
    if (!guild) return d.error(`❌ Invalid guild ID in \`$hasRole[${inside}]\``) 
    
    const member = await guild.members.cache.get(userID)

    if (!member) return d.error(`❌ Invalid user ID in \`$hasRole[${inside}]\``)

    return {
        code: code.replaceLast(`$hasRole[${inside}]`, member.roles.cache.has(roleID))
    }
}