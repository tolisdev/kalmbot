//bruh - ruben was gay over here/
// who ever read it

module.exports = async (d) => {
  //stfu
  
  const code = d.command.code
  
  const r = code.split("$findMember[").length - 1
  
  const inside = code.split("$findMember[")[r].split("]")[0]
  
  const fields = inside.split(";") 
  
  const returnAuthor = ["yes", "no"].includes(fields[fields.length - 1]) ? fields.pop() : "yes" 
  
  const option = fields.join(";")
   
  
  const client = d.client
  
  const u = d.message.guild.members.cache.get(option) || d.message.guild.members.cache.find(m => m.user.tag.toLowerCase() === option.toLowerCase() || m.user.username.toLowerCase() === option.toLowerCase() || m.displayName.toLowerCase() === option.toLowerCase()) || d.message.mentions.members.first() || (returnAuthor === "yes" ? d.message.member : {user: {}}) 
  
  return{
    code: code.replaceLast(`$findMember[${inside}]`, u.user.id)
  } 
} 